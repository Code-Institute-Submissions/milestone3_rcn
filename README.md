<h1 align="center">
    <a href="https://h4rp3rk.github.io/milestone3_rcn/" target="_blank"><img src="static/images/rcn-logo.jpg" style="center" alt="RCN Logo"></a>
</h1>

<div align="center">

# The Royal College of Nursing Member Query Database

[Open in GitHub](https://github.com/H4RP3RK/milestone3_rcn)

</div>

The Royal College of Nursing (RCN) is a professional body and trade union for nursing staff in the UK. It is a membership organisation that provides advice and support on workplace and professional nursing issues. 
The RCN Member Query Database is a website/app created with the primary goal of improving communication and transparency between RCN staff and RCN members. It is intended to be used by both RCN members and RCN staff.

The website/app has a number of features, some of which are only accessible to particular user groups. For all users, there is a login and registration page, a home page with details of the user's account details and the ability to edit these account details.
RCN members are also able to ask a question using an online form and access details of the questions they have asked, including the RCN staff leading on the question response. The member can add additional contacts onto the question, if they would like to add follow up questions/comments.
RCN staff can also add contacts onto questions members have created. RCN staff have additional accessability to see all questions asked by any member, assign the question to themselves or other staff and close the question. They are also able to see a list of all RCN members, their account details and questions they have asked.

The client requested this website to address issues with current methods of communication with its members. Up until now, RCN members have mainly used phone or email to contact the RCN. RCN staff would then respond by phone, email or, in some cases, a face-to-face meeting would be arranged. Member queries can differ in complexity. 
Some matters can be resolved with only one response but more complicated matters could require ongoing correspondence for many weeks or months. It may also require the RCN contacting third parties on behalf of the member. RCN staff are responsible for keeping a record of all interactions with members and third parties on an internal database. 
This database can be viewed by RCN staff but not by RCN members. It is expected that RCN members keep their own records of their ongoing cases or simply remember the information provided to them.
This leaves room for misunderstandings and misinterpretation of information in what can often be complicated and high stakes matters. In order to reduce this risk, RCN staff are encouraged to follow up telephone calls and face-to-face meetings with an email that confirms the advice given and actions agreed. This approach is followed sporadically by RCN staff.

The client goals for this new website/app are to:
* Improve communication and transparency between RCN staff and RCN members.
* Enhance the member experience in the hope of recruiting and retaining more members.
* Mitigate the organisation against misinterpretation of advice.
* Reduce the duplication of work and use of emails by RCN staff.
* Increase the consistency of record keeping.

The user goals for the new website/app are to:
* Easily seek advice and support from the RCN.
* Ensure that queries and advice are fully understood by both parties.
* Keep a record of previous advice that can be readily accessed at a later date.
* Track the progress of long-running cases.
* Reduce the need for email correspondence.

---

## User experience

### Target Audience

There are two target audiences for the RCN app - RCN members and RCN staff 

RCN members are:
* Nursing staff or nursing students.
* Practicing or studying in the UK.
* Ranging in age from 18 to 70 years old.
* In need of advice or support with a workplace or professional nursing issue.

RCN staff are:
* Employed by the RCN.
* May also be trained nurses.
* Ranging in age from 18 to 70 years old.
* Trained in the use of IT systems and databases.

### User Journey

An RCN member is expected to use the website/app in the following way:
1. Go to the website/app to write and submit their question.
2. The question is logged on member's home page.
3. The member can check the question details, including the details of the RCN Lead for their question, the response to their question and/or any work the RCN Lead has undertaken to resolve their question.
4. The member can choose to ask follow up questions by adding a new contact to their question.
5. Details of questions they have asked are logged on their home page, so can be consulted again at a later date.

An RCN staff member is expected to use the website/app in the following way:
1. Check the website/app for questions that have been asked by RCN members.
2. Assign questions to themself or the most appropriate RCN staff.
3. Questions assigned to the user are logged on the staff member's home page.
4. Respond to the question by adding a contact under the question details.
5. Log any additional contacts with third parties as a contact on the question, so the member is aware of the contact and can read the details.
6. Once the question has been answered, close the question.
7. All member accounts are listed so all staff can see member's accounts and their question details.

### User Aim 

RCN members visit this website/app because they want to:
* Ask for advice and support from the RCN.
* Remind themselves of previous advice given to them by the RCN.
* Check the progress of their ongoing case.

RCN staff use the database because they want to:
* Respond to a member's query in writing.
* Record a telephone or face-to-face meeting with the member or third party.
* Check back on the details of a member's case.

This website/app helps the users achieve these goals by providing:
* An easily accessible way for RCN members to get in touch with the RCN.
* An intuitive form of record keeping for both RCN staff and RCN members.
* A place to store previous RCN advice and information.
* A regularly updated log of ongoing cases.

### User Stories

1. As a new visitor to the site, I want to sign up so I can get access to the site's features.
2. As an existing user of the site, I want to update my account details.
3. As a member, I want to use the site to ask the RCN a question.
4. As a member, I would like to check the progress of my ongoing question.
5. As a member, I would like to ask a follow up question to my existing question.
6. As a member, I want to check the contact details of my RCN Lead so I can phone them.
7. As a member, I want to check back on a question I previously asked.
8. As staff, I want an way for me and my colleagues to see the outstanding workload (ie unassigned questions). 
9. As staff, I want to be able to organise the workload by assigning questions to myself or colleagues.
10. As staff, I would like an easy way to monitor my workload and close completed questions.
11. As staff, I want an efficient way to simultaneously keep my own records and update the member.
12. As staff, I would like an easy way to browse search through our members.

### Wireframes

---
## Features 
Every page has a consistent layout and design, which features:
* Headers and footers coloured blue and white, in line with the RCN brand.
* The RCN logo is in the top left corner of the header, in keeping with the layout of existing [RCN websites](https://www.rcn.org.uk/).
* The logo also doubles as a link back to the user's home page, if logged in, or the login page.
* A drop down navigation menu is used to minimise clutter on the page. The navigation menu differs, dependent on whether the user is a member or staff.
* There is a banner across each page with a title that clearly explains the page's purpose.
* The footer features links to related sites and their associated logos. On the left side of the footer there are the RCN sites; [RCN Website](https://www.rcn.org.uk/), [RCNi](https://rcni.com/) and [RCNXtra](https://my.rcn.org.uk/RCNXtra/login).
* On the right hand side of the footer, there are links to the RCN's social media sites; [Twitter](https://twitter.com/theRCN), [Facebook](https://www.facebook.com/index.php?next=https%3A%2F%2Fwww.facebook.com%2Froyalcollegeofnursing), [Instgram](https://www.instagram.com/thercn/) and [YouTube](https://www.youtube.com/user/RCNonline)
* Breadcrumbs are used throughout the website to map the site layout and allow for easy navigation back and forth through the webpages.
* Flash messages are used throughout the website to confirm successful user actions or alert the user to errors.
* Different background images are used on each page. These are both aesthetically pleasing and help to differentiate each page. The images are layered with white opacity to ensure that they are not distracting to the main content of the page. All images are taken from the RCN's existing website.
* Consistent and simple styling of rounded border boxes breaks each web page's information into easily digestible chunks.
* A responsive grid design ensures that the content is organised in an aesthetically pleasing and practical format on all screen sizes.

### Login
The website is intended only for RCN members and RCN staff. There is no functionality for those who do not login, therefore, the website opens on the login page to make this clear to the visitor.
A strap line is used to easily explain the purpose of the website to the user. A link is provided to the Sign Up page for those who do not yet have login details. A danger flash message appears if the wrong username/password combination is entered.

### Sign Up
The sign up page includes a tab which switches between the member and staff sign up forms. A flask form is used for the form functionality. Error messages highlight incompatible inputs for each form section and a flash message is also used to highlight errors, such as the email address is already registered.
There is a link to the log in page for those who have already signed up. If the form is succesfully submitted, the user is redirected to their personalised home page and a flash message appears to confirm that an account has successfully been created for the user.

### User's Home Page 
The user's home page can differ dependent upon whether the user is a member or staff. The overall look is similar. The page is split into three sections. Responsive grids display these sections in a single column in smaller screens. On larger screens, one row has two equally sized sections side by side and there is a second row that is the full length of the container.
#### Member View
Section one asks the member what they would like to do and offers three options in the form of buttons
* update account details - takes the user to a separate page (details below)
* ask new question - takes the user to a separate page (details below)
* see current/closed questions - scrolls the screen down to the last section of the page.

Section two outlines the member's account details. It provides the member's name, username, email address, telephone number, employer and job title. 

Section three lists the questions that the member has submitted. These are displayed using Bootstrap accordion so each question can be expanded to show a summary of the question asked. The accordion header also provides a link to a separate page that gives more detail about the question.
Questions are listed in order of start date, with those asked most recently at the top. Closed questions drop to the bottom of the list.

#### Staff View
Section one also asks the staff user questions and provides accompanying buttons. They are
* update account details
* see assigned questions
* browse unassigned questions
* see all member accounts.

Section two also provides the user's account details. Instead of stating the employer, the staff user's account shows their workplace. 

Section three provides details of all the questions assigned to the staff user. Again, they are listed by start date, with most recent at the top. Closed questions drop to the bottom of the list. The accordion
expands to provide a summary of the question and there's a link to take the user to full details of the question.

### Account 
Allows the user to update their account details. The form is prepopulated by the user's existing account details. All inputs except the username can be altered. The username is greyed out to make this apparent to the user.
Responsive grid design shows the labels and inputs in one full width column on smaller screens. On larger screens the form is centred in the screen and labels and inputs are shown side by side. This aids with readability.
When the user submits the form, they are redirected back to their home page and a flash message confirms that the update has been successful. Breadcrumbs are provided incase the user wishes to direct back to the home page without
making any updates.

### Ask New Question - Members Only 
This page is available for members only, to allow them to submit a question to be answered by an RCN staff member. A simple form allows the member to easily submit their question. A select box allows them to choose the question type that most suits their question and
a free text box allows them to ask their question. The form is consistent with the responsive grid layout described in the form above.

A placeholder message encourages them to provide as much detail as possible. The breadcrumbs allows the member to direct back to the home page without submitting a question. On submission, the member is redirected back to
their home page and a flash message confirms that the question has been submitted. It also reminds the member that they can check on the "Questions" section of their home page for details of the question they have just submitted.

### Member Question Details - Members Only 
This page is available for members only as staff see a different view of the question details. Members can direct to this page from their home page once they have submitted a question. 

The page has a similar layout to the home page - three sections that have the same responsive layout that changes dependent on the size of the screen. Section one provides the RCN Lead's contact details. If an RCN Lead hasn't yet been assigned, it provides general RCN contact details. It also 
provides a button that allows the member to contact their RCN Lead. This is logged as a contact on the question.

Section two provides detail of the question, including the question type, start date, end date (which remains blank if the question is open) and the question summary.

Section three provides all contacts associated with the question. This could be further contacts made by the member or contacts logged by the RCN Lead. The contacts are displayed in a similar format to the questions on the home page. They are listed in date order, most recent at the top. Bootstrap accordions are used. 
On expansion, contact details are provided. For those contacts that are made by the member, an edit button appears to allow them to make changes to their contact.

### Staff Question Details - Staff Only 
This page is available for staff only. It provides details of the question the member has asked and provides the staff user with a number of options for actions that can be taken. 

Responsive grid design is used for the layout of the page. It is broken into four sections for readbility. In smaller screens, these sections are displayed in one column. On larger screens, section one is full width of the container, section two and three are equal width side by side and column four is full width. 
The overall layout is similar to the home page and member question details page, in order to ensure consistency and ease of use for the user. 

Section one displays at the top of the page and asks the staff what they would like to do, and provide corresponding buttons. Options are:
* Contact member - this leads to the contact form section below.
* Add contact - leads to a new page
* Assign question - displays a modal that allows staff with a one question form that allows them to choose to whom to assign the question. This could be the user or a colleague. 
* Browse contacts - scrolls the page to section four, where the contacts are listed 
* Close/reopen question - this button differs dependent on whether the question is open or closed. If open, a modal appears to ask the staff user if they are sure they wish to close the question and provides a close button. If the button is pressed, the modal closes and the question details of the page is updated with an end date. The end date is the date that the close button is pressed. If the question is already closed, the reopen button simply removes the end date from the question details section.

Section two of the page provides the question details and is the same as the question details described in the Member Question Details page above. Section three provides the member's account details. 
Section four lists the contacts related to the question in the same way described in the Member Question Details page above. 

### Contact Form 
This page is accessible to both members and staff, although accessed in a different way for each group of users. Members can access this through the "Contact your RCN Lead" button on their home page, described above. 
The page consists of a simple form, that has the same responsive grid format as those forms described above. The form has two greyed out readonly inputs; from and to. From is always the website user. For members, the "To" input will either state the RCN Lead or, if the RCN Lead hasn't yet been assigned, simply the RCN.
For staff, the "To" section will state the member who submitted the overarching question. 

Breadcrumbs allow the user to return to their home page or details of the overarching question without submitting a contact.

### Detailed Contact Form - Staff Only 
This page provides a more detailed contact form that allows staff to log all contacts they have had in relation to the question. The page contains a form that uses the same responsive grid design that is described for forms above. The staff user is given a select option as to the type of contact eg this app, email, telephone, in person etc. 
The date of the contact is prepopulated with the current date and time but this can be overwritten by the user. The "From" section is prepopulated by the user's name but can also be overwritten. The "To" section and "Contact Details" are free text to allow the user to complete these details. 
On submit, the user is redirected back to the Staff Question Details page and a flash message confirms that the contact has been logged. The contact should also appear on the question details page. If the user chooses not to submit a contact, they can redirect back to their home page, unassigned questions page or question details page using the breadcrumbs. 

### Unassigned Questions - Staff Only 
This page is accessible only to staff. It provides a list of all questions that have not yet been assigned to an RCN Lead. The questions are listed using the Bootstrap accordion, to remain consistent with the rest of the site. The accordion header describes the question type and the date the question was asked. There are also three buttons:
* Summary button - allows the accordion to be expanded to show the details of the question without the need to navigate to a new page.
* Details button - directs the user to the Staff Question Details page for the associated question
* Assign question button - a modal appears that allows the question to be assigned to the user or a colleague without the need to navigate from the page 

### All Member Accounts - Staff Only 
This page is accessible only to staff. It provides a list of all the members accounts. The layout is very similar to the unassigned questions page to ensure good user experience. However, the expandable accordion was not considered necessary for this list as all pertinent information can be included in the header. Members are listed in alphabetical order (in accordance with their surname).
A search bar allows the user to search by name, job title or employer. For each member, a button is provided that leads the user to further details. 

### 


### Existing Features 

### Features Left to Implement 
* Functionality to reset the user password and change the username. As authentication was not the focus of this project, it was not considered a priority.

---

## Technologies Used 

* [Gitpod](https://www.gitpod.io/)
* [Github](https://github.com/)
* HTML and CSS 

---

## Testing 

### Tools 

### User Testing 

### User Feedback

### Problem Solving 

---
## Deployment 

To deploy this page to GitHub Pages from its [GitHub repository](https://github.com/H4RP3RK/milestone_2_rpoas), the following steps were taken: 

1. From the menu items near the top of the page, select **Settings**.
2. Scroll down to the **GitHub Pages** section.
3. Under **Source** click the drop-down menu labelled **None** and select **Master Branch**
4. On selecting Master Branch the page is automatically refreshed, the website is now deployed. 
5. Scroll back down to the **GitHub Pages** section to retrieve the link to the deployed website.
 
### How to run this project locally

To clone this project from GitHub:

1. Under the repository name, click "Clone or download".
2. In the Clone with HTTPs section, copy the clone URL for the repository. 
3. In your local IDE open Git Bash.
4. Change the current working directory to the location where you want the cloned directory to be made.
5. Type ```git clone```, and then paste the URL you copied in Step 3.
```console
git clone https://github.com/H4RP3RK/milestone3_rcn.git
```
6. Press Enter. Your local clone will be created.

Further reading and troubleshooting on cloning a repository from GitHub [here](https://help.github.com/en/articles/cloning-a-repository).

---
## Credits 

### Content

### Media 

### Code 

### Acknowledgements 

******MY OWN NOTES - NOT PART OF FINAL README******

## Questions/To Do

Jonathan 08.09.2020
x Read up on flask forms documentation
- Change all to forms
x Combine different methods to one, particularly Login
x Can have multiple base.html and pull from it to create staff/member views
x Avoid duplication of else in methods, means it can be reduced down
x JS - organise the questions by date etc or close btn on flash messages

shared_login.html
    - link up forgot password
    x more padding at top/bottom
Home.html
    - question tabs showing all questions
    - account details fall of page on small screen
New_question.html
    - Change the questions
    x Put question/input in one row
    - Add back button?
New_contact.html
    - Add back button?
    x for staff, doesn't record member contact 
    x Change to form
    x Sort app route, need if 'GET'
Staff_new_contact.html 
    - Add back button?
    x Change date forma
Account.html
    - Add back button?
Unassigned_questions.html
    - JS to filter queries
    x btn margins
    x targets only one accordion
Question_details.html
    - Show photo of RCN staff 
    - If no contacts, add a generic message (Why is this not working?)
    - Upload file
    x Change date format
    x Check that showing in order, once date format corrected
    - Better way to show end date
Staff_question_details.html
    x Changed time format to match other Pages
    - Change accordion forms to font awesome to match member_list page
    x Button margins top/bottom
Member_details.html
    - Change background image
App.py 
    - Can I simplify the way to access user role?
    - Can the members.queries.find_one be simplified so it's not duplicated


## Done
New_question.html
    x Why won't labels go blue?
Base.html
    x restyle navbar dropdown
    x Change dropdown options for staff
Welcome.html
    x If session exists, take to member_home rather than log_in
shared_login.html
    x Why will this not load up initially?
Register.html
    x If user exists with email address, can you send error?
Queries.html 
    x Need to show RCN Lead Name rather than RCN Lead ID
    x How do I set up so tables link with each other? 
    x Why is logo image not showing?
New_contact.html
    x How do I timestamp contact? - default=datetime.utcnow
    x Edit contact
    x If mbr adds new contact, remove end_date
    x If staff, redirect to staff question view
Home.html
    x scroll to questions
    x highlight question section when button pressed
    x Reorder accordion so latest come to the top
    x change datetime to better format
    x all member account btn
    x In staff view, remove case from view once closed
    x In member view, show end date 
Account.html
    x make sure update works
    x Change to show workplace if staff
    x change form to flask form 
    x warning message when changing account details
    x Change staff job_title to select
    x error message with mbr updates
Unassigned_questions.html
    x Why won't staff pull through to modal?
Question_details.html
    x Link contacts to particular query
    x Restyle accordion
    x scroll to contacts
    x highlight contacts section when button pressed
    x change datetime to better format
    x If RCN staff unassigned, add a message with general contact details
    x Show details of RCN staff dealing with query
    x Add edit contacts btn, only on contacts created by user
    x Reorder accordion so latest come to the top
    x add close btn if case open
    x add reopen btn if case closed
Staff_question_details.html
    x Change workplace to employer in member details
    x link up close question 
    x Add edit contacts btn, only on contacts created by user
    x Add top/bottom margins to btns
    x Alter member question layout - form?
    x Fit form inputs within border
    x Open two accordions at one time
Member_list.html
    x Add JS to filter different queries and/or search
    x padding for button
    x Add background image
    x padding under search bar
    x button goes off col at smaller screen sizes
App.py
    x set up environ to protect password before pushing
    x Can one @app.route send to two tables? Want to send to query and contact?
    x Why is secret key not working when in env.py?
    x simplify duplication of else methods. Use and with member and password

## Mandatory Requirements
A project violating any of these requirements will FAIL

- Data handling: Build a MongoDB-backed Flask project for a web application that allows users to store and manipulate data records about a particular domain. If you are considering using a different database, please discuss that with your mentor first and inform Student Care.
- Database structure: Put some effort into designing a database structure well-suited for your domain. Make sure to put some thought into the nesting relationships between records of different entities.
- User functionality: Create functionality for users to create, locate, display, edit and delete records (CRUD functionality).
- Use of technologies: Use HTML and custom CSS for the website's front-end.
- Structure: Incorporate a main navigation menu and structured layout (you might want to use Materialize or Bootstrap to accomplish this).
- Documentation: Write a README.md file for your project that explains what the project does and the value that it provides to its users.
- Version control: Use Git & GitHub for version control.
- Attribution: Maintain clear separation between code written by you and code from external sources (e.g. libraries or tutorials). Attribute any code from external sources to its source via comments above the code and (for larger dependencies) in the README.
- Deployment: Deploy the final version of your code to a hosting platform such as Heroku.
- Make sure to not include any passwords or secret keys in the project repository.
- Important Notes - No authentication is expected for this project. The focus is on the data, rather than any business logic.

## Assessment Criteria
Your Data Centric Development project will be assessed based on the following criteria:

* Usability and Visual Impact:
    - Project Purpose
    - UX design
    - Suitability for purpose
    - Navigation
    - Ease of use
    - Information Architecture
    - Defensive Design
* Layout and Visual Impact:
    - Responsive Design
    - Image Presentation
    - Colour scheme and typography
* Code Quality:
    - Appropriate use of HTML
    - Appropriate use of CSS
    - Appropriate use of JavaScript
    - Appropriate use of Python
    - Appropriate use of the template language
* Software Development practices:
    - Directory Structure and File Naming
    - Version control
    - Testing implementation
    - Testing write-up
    - Readme file
    - Comments
    - Data store integration
    - Deployment implementation
    - Deployment write-up